# コールドスタート防止について

## 概要

Render.comの無料プランでは、15分間アクセスがないとサービスがスリープ状態になります。
次回アクセス時に起動するまで15-30秒程度かかります（コールドスタート）。

## 対策の選択肢

### 1. 何もしない（推奨）

**メリット:**
- コストゼロ
- 無料プランの制限を超える心配がない
- カスタマイズした起動画面でユーザー体験が向上済み

**デメリット:**
- 最初のアクセス時に15-30秒の待ち時間

**推奨理由:**
このアプリは利用頻度がそれほど高くないため、コールドスタートを許容する方が合理的です。

### 2. GitHub Actionsでのpingを有効化（条件付き推奨）

**利用想定ケース:**
- 平日の営業時間中（9-21時）だけサービスを温かく保ちたい
- 月間260時間程度の稼働で済む
- ユーザーアクセスと合わせても無料枠（750時間/月）内に収まる

**実装方法:**
1. `.github/workflows/keep-alive.yml.example` を `.github/workflows/keep-alive.yml` にリネーム
2. ファイル内の `your-app-name` を実際のRender.comアプリ名に置き換え
3. GitHubにコミット・プッシュ

**設定内容:**
- 実行時間: 平日（月-金）9:00-21:00（日本時間）
- 実行間隔: 15分ごと
- 月間稼働時間: 約260時間（無料枠750時間の約35%）

### 3. 常時起動（非推奨）

**理由:**
- 常時起動には月間720時間必要（無料枠750時間のほぼ全て）
- 実際のユーザーアクセスと合わせると確実に無料枠を超過
- 超過すると自動的に有料プランへの変更が必要になる
- 月額$7〜のコストが発生

## Render無料プランの制限

| 項目 | 制限 |
|------|------|
| 月間稼働時間 | 750時間 |
| 同時起動サービス数 | 制限なし（総時間で計算） |
| コールドスタート時間 | 15-30秒 |
| アイドルタイムアウト | 15分 |

## 推奨事項

**以下のいずれかを選択してください:**

1. **何もしない**: ほとんどのユースケースで十分
   - 起動画面でユーザーに状況を伝えている
   - コストゼロで運用できる

2. **平日営業時間のみpingを有効化**: 積極的に利用される場合
   - 無料枠内で運用可能
   - 主な利用時間帯の体験を向上できる

3. **有料プランへの移行**: 常時起動が必要な場合
   - 月額$7のStarterプランで常時起動可能
   - ビジネス利用や高頻度アクセスに適している

## 現在の実装状態

- ✅ カスタマイズされた起動画面（loading.tsx）
- ✅ MITCHELLアイコンの表示
- ✅ ユーザーフレンドリーなメッセージ
- ⚠️ コールドスタート防止は未有効化（意図的）

## 参考資料

- [Render.com Pricing](https://render.com/pricing)
- [Render.com Free Plan Limits](https://render.com/docs/free)
