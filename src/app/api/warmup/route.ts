/**
 * сЃќсЃЕсѓдсѓХсѓдсѓЕсЃ╝сЃасѓбсЃЃсЃЌAPI
 *
 * сЃѕсЃЃсЃЌсЃџсЃ╝сѓИсѓбсѓ»сѓ╗сѓ╣ТЎѓсЂФсЃљсЃЃсѓ»сѓ░сЃЕсѓдсЃ│сЃЅсЂДсЃќсЃЕсѓдсѓХсѓњС║ІтЅЇУхитІЋсЂЎсѓІсЂЪсѓЂсЂ«сѓесЃ│сЃЅсЃЮсѓцсЃ│сЃѕ
 */

import { NextResponse } from 'next/server';
import { browserManager } from '@/lib/scraper/BrowserManager';

export const dynamic = 'force-dynamic';
export const maxDuration = 60; // VercelсЂ«сѓ┐сѓцсЃасѓбсѓдсЃѕУеГт«џ№╝ѕ60уДњ№╝Ѕ

export async function POST() {
  try {
    console.log('­ЪћЦ сЃќсЃЕсѓдсѓХсѓдсѓЕсЃ╝сЃасѓбсЃЃсЃЌсЃфсѓ»сѓесѓ╣сЃѕтЈЌС┐А');

    // сЃљсЃЃсѓ»сѓ░сЃЕсѓдсЃ│сЃЅсЂДсЃќсЃЕсѓдсѓХсѓњУхитІЋ№╝ѕсѓесЃЕсЃ╝сЂ»уёАУдќ№╝Ѕ
    browserManager.warmup();

    // сЂЎсЂљсЂФсЃгсѓ╣сЃЮсЃ│сѓ╣сѓњУ┐ћсЂЎ№╝ѕсЃќсЃЕсѓдсѓХУхитІЋт«їС║єсѓњтЙЁсЂЪсЂфсЂё№╝Ѕ
    return NextResponse.json({
      status: 'warmup_started',
      message: 'сЃќсЃЕсѓдсѓХсЂ«сѓдсѓЕсЃ╝сЃасѓбсЃЃсЃЌсѓњжќІтДІсЂЌсЂЙсЂЌсЂЪ',
    });
  } catch (error) {
    console.error('РЮї сѓдсѓЕсЃ╝сЃасѓбсЃЃсЃЌсѓесЃЕсЃ╝:', error);

    // сѓесЃЕсЃ╝сЂїуЎ║ућЪсЂЌсЂдсѓѓсѓ»сЃЕсѓцсѓбсЃ│сЃѕсЂФсЂ»тй▒жЪ┐сЂЌсЂфсЂёсѓѕсЂєсЂФ200сѓњУ┐ћсЂЎ
    return NextResponse.json({
      status: 'error',
      message: 'сѓдсѓЕсЃ╝сЃасѓбсЃЃсЃЌсЂФтц▒ТЋЌсЂЌсЂЙсЂЌсЂЪ№╝ѕТцюу┤бТЎѓсЂФтєЇУЕдУАїсЂЋсѓїсЂЙсЂЎ№╝Ѕ',
    });
  }
}
